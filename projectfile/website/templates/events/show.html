{% extends 'base.html' %}

{% import "bootstrap/wtf.html" as wtf %}

{% block content %}

<style>
  .card {
        margin: 0 auto; /* Added */
        float: none; /* Added */
        margin-bottom: 10px; /* Added */
}
.card-img-top {
    width: 100%;
    height: 50vw;
    object-fit: cover;
}

</style>
<div class="container-fluid ">  
    <div class="row mt-1 mb-3">  
        <div class="col-md-12">  
            <div class="float-left">  
                 <h1 class="mb-0">Music Event: {{event.name}}</h1>  
            </div>  
        </div>  
    </div>  
 
    <!-- Event --> 
    <div class="row container-fluid ">  
      <div class="col-md-12 ">  
        <div class="card backgroundCustom">  
          <div class="card-body backgroundCustom">  
            <div class="media backgroundCustom">  
              <img class="img-fluid card-img-top center  backgroundCustom pad margin" src="{{event.image}}" style="width: 53rem;">  
              <div class="media-body">  
                <h2 class="mt-0 text-center text-uppercase changeFont2">{{event.name}}</h2>  
                <h5 class="text-center text-light"><br>Venue:</br> {{event.venue}}</h5>
                <h5 class="text-center  text-light"><br>Date:</br>{{event.date}}</h5>
                <h5 class="text-center  text-light"><br>Ticket Price (AUD):</br>${{event.price}}</h5>
                <h5 class="text-center text-info "><br>Status:</br>{{event.status}}</h5>  
                <div class="mb-3 mt-5 text-light text-center event-description">
                  <h5>Event Description:</h5>
                  <p>{{event.description}}</p>
                </div>
                <!-- Button trigger modal -->
                <div class="container pad">
                  <div class="row">
                    <div class="col text-center">
                      <a href="#">
                        <button type="button text-center" class="btn btn-primary btn-primary" data-bs-toggle="modal"
                          data-bs-target="#exampleModal">
                          Book Now
                        </button>
                      </a>
                    </div>
                  </div>
                </div> 
              </div>  
            </div>  
          </div>  
        </div>  
      </div>  
    </div> 

        <!-- inner modal -->
        <div class="modal fade" id="exampleModal" tabindex="-5" aria-labelledby="exampleModalLabel" aria-hidden="true">
          <div class="modal-dialog">
            <div class="modal-content">
              <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Booking Tickets: {{event.name}}</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
              </div>
              <div class="modal-body">
                <div class="center">
                  <p class="text-center">Amount of tickets:
                  </p>
                  <div class="">

                    <p>
                      </p><div class="input-group">
                          <span class="input-group-btn">
                              <button type="button" class="btn btn-danger btn-number"  data-type="minus" data-field="quant[2]">-
                                <span class="glyphicon glyphicon-minus"></span>
                              </button>
                          </span>
                          <input type="text" name="quant[2]" class="form-control input-number" value="1" min="1" max="100">
                          <span class="input-group-btn">
                              <button type="button" class="btn btn-success " data-type="plus" data-field="quant[2]">+
                                  <span class="glyphicon glyphicon-plus"></span>
                              </button>
                          </span>
                      </div>
                  <p></p>
                </div>
                  <p class="text-center card margintop">Ticket Price:<strong>{{event.price}}</strong></p>
                  <p class="text-center card margintop">Total (AUD): <strong>need to figure out</strong></p>
                </div>
              </div>
              <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                <a href="{{url_for('events.show', id=event.id)}}" class="btn btn-success btn-md" id='topButton'><span
                    class="glyphicon glyphicon-log-out"></span> Confirm</a>
              </div>
            </div>
          </div>
        </div>
  
 
   
 
    <hr>  

    <div>

      <div class="navigation text-center center">
        <p>Search Events (this should be removed, it is redundant)</p>
        <a href="" class="nav_btn">1</a>
        <a href="" class="nav_btn">2</a>
        <a href="" class="nav_btn">3</a>
        <a href="" class="nav_btn">4</a>
        <a href="" class="nav_btn">5</a>
        <a href="" class="nav_btn">6</a>
        <a href="" class="nav_btn">7</a>

      </div>
      <script>
        var link = document.getElementsByClassName('nav_btn');
          for(var i = 0; i< link.length; i++){

            link[i].href = '/events/'+(i+1);}
      </script>
    </div>
 
    <!-- Comments -->  
    <div class="row">  
      <div class="col-md-12">  
        <h2>Comments</h1>  
      </div>  
    </div>  
 
    <div class="row border-bottom pad"> 
      {{wtf.quick_form(form,"/events/{0}/comment".format(event.id), button_map={'submit':'success'})}} 
      {% for comment in event.comments %}
      <div class="card col-md-12 pad" id="Comments">  
        <b>{{comment.user.name}} <span class="ml-2 text-muted">{{comment.created_at.strftime("%d %B, %Y")}}</span></b>&#128231
        <p>{{comment.text}}</p>  
      </div> 
      {% endfor %} 
      <br>
      
    </div>  
  </div> 




{% endblock %}